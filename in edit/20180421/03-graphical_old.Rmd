---
output:
  pdf_document: default
---

# Visual exploration
[elaborate here]
In this chapter, we will explore the data visually by plots. In plotting the data, you must ask yourselves these:

1.  Which variable do you want to plot?
2.  What is the type of that variable? Factor? Numerical?
3.  Are you going to plot another variable together?

## Preliminaries

### Reading dataset
We will use `qol.sav` dataset in this chapter. Create an object namely `dataSPSS` to the data read into R.  
```{r}
library(foreign)
dataSPSS <- read.spss('qol.sav', to.data.frame = TRUE)
```

### Describing data
Let us examine the data
```{r}
str(dataSPSS)
```

Now, let us summarize our data
```{r}
summary(dataSPSS)
```

## One variable

### A categorical variable
We can create a simple barchart
```{r}
dist.sex<-table(dataSPSS$sex)
barplot(dist.sex,
        main='Sex distribution',
        xlab='Sex')
```

### A numerical variable
Histogram
```{r}
hist(dataSPSS$age, main = 'Age',
     xlab = 'Age in years',
     ylab = 'Count')
```

## Two variables
### A numerical with another numerical variable
We will use `scatterplot` to plot 
```{r}
plot(dataSPSS$tahundx, dataSPSS$age,
     main = 'Duration having DM VS age',
     xlab = 'Duration of DM', ylab = 'Age',
     pch = 19)
```

Let us make a fit line
```{r}
plot(dataSPSS$tahundx, dataSPSS$age,
     main = 'Duration having DM VS age',
     xlab = 'Duration of DM', ylab = 'Age',
     pch = 19)
abline(lm(dataSPSS$age~dataSPSS$tahundx), col = 'red')
```

and a lowess 
```{r}
plot(dataSPSS$tahundx, dataSPSS$age,
     main = 'Duration having DM VS age',
     xlab = 'Duration of DM', ylab = 'Age',
     pch = 19)
lines(lowess(dataSPSS$tahundx,dataSPSS$age), col = 'blue')
```

### A categorical variable with a categorical variable
Now, we will plot 2 categorical variables simultanenously. First, we will use stacked barchart
```{r}
compl.sex<-table(dataSPSS$complica,dataSPSS$sex)
compl.sex
barplot(compl.sex,
        main='Complications by sex',
        xlab='Sex',
        col=c('blue','red'),
        legend=c('No','Yes'))
```

Next, we will use grouped barchart
```{r}
compl.sex
barplot(compl.sex,
        main = 'Complications according to sex',
        xlab = 'Sex',
        col = c('blue','red'),
        legend = c('no','yes'),
        beside = TRUE)
```

## Multiple plots in one go
Here we will use some tricks, to show multiple plots in one go.
```{r}
dataSPSS.4 <- dataSPSS[,c("age", "hba1c", "fbs", "choleste")]
par(mfrow = c(2, 2))  # two rows and two columns
mapply(hist, dataSPSS.4)  # not nice, no proper labels
mapply(hist, dataSPSS.4,
       main = paste("Histogram of ", colnames(dataSPSS.4)), 
       xlab = colnames(dataSPSS.4))  # nice with labels
par(mfrow = c(1, 1))  # reset back to only one plot per view
```
As you can see, we used `paste`. We will learn more about `paste` later.


## Summary
[summary here]
